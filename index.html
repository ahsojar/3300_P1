<html>
<head>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<!-- Load the d3 library. -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<style>
/* put a border around the svg element so we can see the coordinate system better. */
body { font-family: "Lato"; 
text-align:center;
margin:20 auto;
}
div { margin: 40px; }
svg{background-color: rgba(23,23,23,.1);
  overflow: visible;
}

.circle{opacity: .4;}
path{fill:#666;
z-index: 99999;
}

.tick{z-index: 9999999999;}

path{width:3px;}

text{z-index: 9999999;}
#canvas{width:1000px;
margin: 0 auto;
}

h1{font-size:12pt;}

</style>
</head>
<body>

<h1>College Admissions of 4 Schools</h1>

<!-- The SVG element will go in here -->
<svg id="p1" height="80" width="1200" >

  

  <circle cx="810" cy="55" r="8" fill="green"></circle>
  <circle cx="900" cy="55" r="8" fill="red"></circle>
  <circle cx="990" cy="55" r="8" fill="blue"></circle>

  <text text-anchor="middle" x="850" y="60" fill="black" font-family="Lato">Accepted</text>
  <text text-anchor="middle" x="940" y="60" fill="black" font-family="Lato">Declined</text>
  <text text-anchor="middle" x="1040" y="60" fill="black" font-family="Lato">Attending</text>

</svg>


<div id="canvas">
<svg id="p1" height="80" width="1200" >
  <text text-anchor="middle" x="850" y="60" fill="black" font-family="Lato">Boston University</text>
  <text text-anchor="middle" x="350" y="60" fill="black" font-family="Lato">Boston University</text>

</svg>
</div>

<script>

var schoolStats = []; 
var schools = ["cornell.json", "BU.json", "NAU.json", "NYU.json"]; 

pullStats(schools);

function pullStats(json_files) {
	json_files.forEach(function(item) {
		d3.json(item, function (error, data) {
        thisSchool=[]
			for (var i = 1; i < data.length; i++) {
				data[i].data.forEach(function(item) {
					var point = {
						SCHOOL : json_files[i-1],
						SAT : item[0], 
						GPA : item[1], 
						TYPE : data[i].label
					}
					thisSchool.push(point);
				});
			}
      schoolStats.push(thisSchool)

		});
	});
}




var margin = {top: 20, right: 30, bottom: 30, left: 40},
    width = 500 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;



// setup x 
    var xScale = d3.scale.linear().domain([4.0,2.0]).range([0, width]), // value -> display
    xAxis = d3.svg.axis().scale(xScale).orient("bottom");

// setup y
    var yScale = d3.scale.linear().domain([300,800]).range([height, 0]), // value -> display
    yAxis = d3.svg.axis().scale(yScale).orient("left");








    xScale2 = d3.scale.linear().domain([2.0,4.0]).range([0, width]), // value -> display
    xAxis2 = d3.svg.axis().scale(xScale2).orient("bottom");

// setup y
    yScale2 = d3.scale.linear().domain([800,300]).range([height, 0]), // value -> display
    yAxis2 = d3.svg.axis().scale(yScale2).orient("left");





var cornell
d3.json("cornell.json", function (error, data) {


// FIRST GRAPH :NYU
 var svg = d3.select("#canvas").append("svg")
    .attr("width", width+ margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  // x-axis
  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + (20+height) + ")")
      .call(xAxis2)
    .append("text")
      .attr("class", "label")
      .attr("x", 0)
      .attr("y", -6)
      .style("text-anchor", "start")
      .text("GPA");

  // y-axis
  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis2)
      .attr("transform", "translate(" +  (30+width) + ",0)")
      .attr("z-index", '99999')
     
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Average SAT Score");

//accepted
var circles = svg.selectAll("circle").data(schoolStats[0])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale2(d.GPA) })
    .attr("cy", function(d) { return yScale2(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  })
    .attr("opacity", ".6"); 


// //rejected
// var circles = svg.selectAll("circle").data(schoolStats[0])
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale2(d.GPA) })
//     .attr("cy", function(d) { return yScale2(d.SAT) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "#E65C5C")
//     .attr("opacity", ".6"); 


// //attending
// var circles = svg.selectAll("circle").data(schoolStats[0])
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale2(d.GPA) })
//     .attr("cy", function(d) { return yScale2(d.SAT) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "black")
//     .attr("opacity", ".6"); 



//2nd GRAPH
var svg2 = d3.select("#canvas").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)

  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")


  // x-axis
  svg2.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(-20," + (20+height) + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("GPA");
	  
//accepted
var circles = svg2.selectAll("circle").data(schoolStats[1])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale(d.GPA) })
    .attr("cy", function(d) { return yScale2(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  })
    .attr("opacity", ".6"); 



// //rejected
// var circles = svg2.selectAll("circle").data(getCoordinates(schoolData, 1, "rejected"))
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale(d.gpa) })
//     .attr("cy", function(d) { return yScale2(d.sat) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "#E65C5C")
//     .attr("opacity", ".6"); 


// //attending

// var circles = svg2.selectAll("circle").data(getCoordinates(schoolData, 1, "attending"))
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale(d.gpa) })
//     .attr("cy", function(d) { return yScale2(d.sat) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "black")
//     .attr("opacity", ".6"); 




 //GRAPH 3: School 3:
var svg3 = d3.select("#canvas").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

 
  // y-axis
  svg3.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .attr("transform", "translate(" + (width+30) + ",-0)")
    .append("text")
      .attr("class", "label")
      .attr("y", height)

      .attr("transform", "rotate(-90)")
      .attr("dy", ".71em")
      .style("text-anchor", "end")



//accepted
var circles = svg3.selectAll("circle").data(schoolStats[2])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale2(d.GPA) })
    .attr("cy", function(d) { return yScale(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  })
    .attr("opacity", ".6"); 

// //rejected
// var circles = svg3.selectAll("circle").data(getCoordinates(schoolData, 2, "rejected"))
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale2(d.gpa) })
//     .attr("cy", function(d) { return yScale(d.sat) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "#E65C5C")
//     .attr("opacity", ".6"); 


//attending
// var circles = svg3.selectAll("circle").data(getCoordinates(schoolData, 2, "attending"))
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale2(d.gpa) })
//     .attr("cy", function(d) { return yScale(d.sat) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "blue")
//     .attr("opacity", ".6"); 





// GRAPH 4
  var svg4 = d3.select("#canvas").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");


// var circles = svg4.selectAll("circle").data(getCoordinates(schoolData, 3, "accepted"))
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale(d.gpa) })
//     .attr("cy", function(d) { return yScale(d.sat) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "green")
//     .attr("opacity", ".6"); 


//accepted
var circles = svg4.selectAll("circle").data(schoolStats[3])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale(d.GPA) })
    .attr("cy", function(d) { return yScale(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  })
    .attr("opacity", ".6"); 



// //attending
// var circles = svg4.selectAll("circle").data(getCoordinates(schoolData, 3, "attending"))
//     .enter().append("circle");

// circles.attr("cx", function(d) { return xScale(d.gpa) })
//     .attr("cy", function(d) { return yScale(d.sat) })
//     .attr("r", function(d) { return 4 })
//     .attr("fill", "blue")
//     .attr("opacity", ".6"); 

      
});




</script>

</body>
</html>






