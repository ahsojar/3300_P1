<html>
<head>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<!-- Load the d3 library. -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<link href='http://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>
<style>
/* put a border around the svg element so we can see the coordinate system better. */
body { font-family: "Lato"; 
text-align:center;
margin:20 auto;
font-weight: 300;
}
div { margin: 40px; }
svg{background-color: #E2E2CE;
  overflow: visible;
    overflow-y: visible;
}

.circle{opacity: .4;}
path{fill:#666;
z-index: 99999;
}

.tick{z-index: 9999999999;
font-size: 10pt;
}

path{width:3px;}

text{z-index: 9999999;}
#canvas{width:1000px;
margin: 0 auto;
}

h1{font-size:12pt; font-family: 'Lato';}

</style>
</head>
<body>

<h1>College Admissions of 4 Schools</h1>

<!-- The SVG element will go in here -->
<svg id="p1" height="80" width="1000">
  <circle cx="710" cy="55" r="8" fill="green"></circle>
  <circle cx="800" cy="55" r="8" fill="red"></circle>
  <circle cx="890" cy="55" r="8" fill="blue"></circle>
  <text text-anchor="middle" x="750" y="60" fill="black" font-family="Lato">Accepted</text>
  <text text-anchor="middle" x="840" y="60" fill="black" font-family="Lato">Declined</text>
  <text text-anchor="middle" x="940" y="60" fill="black" font-family="Lato">Attending</text>
</svg>

<svg id="p1" height="80" width="1000" >
    <text text-anchor="middle" x="250" y="60" fill="black" font-family="Lato">Cornell University</text>
	<text text-anchor="middle" x="750" y="60" fill="black" font-family="Lato">Boston University</text>
</svg>

<div id="canvas"></div>

<svg id="p1" height="80" width="1000" >
  <text text-anchor="middle" x="750" y="60" fill="black" font-family="Lato">Northern Arizona University</text>
  <text text-anchor="middle" x="250" y="60" fill="black" font-family="Lato">New York University</text>

</svg>
<script>

var schoolStats = []; 
var schools = ["cornell.json", "BU.json", "NAU.json", "NYU.json"]; 

pullStats(schools);

function pullStats(json_files) {
	json_files.forEach(function(items) {
		d3.json(items, function (error, data) {
        currentSchool = [];
			for (var i = 1; i < data.length; i++) {
				data[i].data.forEach(function(item) {
					var point = {
						SCHOOL : items,
						SAT : item[0], 
						GPA : item[1], 
						TYPE : data[i].label
					}
					currentSchool.push(point);
				});
			}
      		schoolStats.push(currentSchool);
		});
	});
}




var margin = {top: 20, right: 30, bottom: 30, left: 40},
    width = 500 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;



// setup x 
    var xScale = d3.scale.linear().domain([4.0,2.0]).range([0, width]), // value -> display
    xAxis = d3.svg.axis().scale(xScale).orient("bottom");
// setup y
    var yScale = d3.scale.linear().domain([200,800]).range([height, 0]), // value -> display
    yAxis = d3.svg.axis().scale(yScale).orient("left");
// setup x 
    xScale2 = d3.scale.linear().domain([2.0,4.0]).range([0, width]), // value -> display
    xAxis2 = d3.svg.axis().scale(xScale2).orient("bottom");
// setup y
    yScale2 = d3.scale.linear().domain([800,200]).range([height, 0]), // value -> display
    yAxis2 = d3.svg.axis().scale(yScale2).orient("left");

d3.json("cornell.json", function (error, data) {

// Cornell 
 var svg = d3.select("#canvas").append("svg")
    .attr("width", width+ margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
  // x-axis
  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + (20+height) + ")")
      .call(xAxis2)
    .append("text")
      .attr("class", "label")
      .attr("x", 0)
      .attr("y", -6)
      .style("text-anchor", "start")
      .text("GPA");

  // y-axis
  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis2)
      .attr("transform", "translate(" +  (30+width) + ",0)")
      .attr("z-index", '99999')
     
    .append("text")
      .attr("class", "label")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Average SAT Score");

//Cornell - Circles
var circles = svg.selectAll("circle").data(schoolStats[0])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale2(d.GPA) })
    .attr("cy", function(d) { return yScale2(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  }).attr("opacity", ".4"); 



//BU
var svg2 = d3.select("#canvas").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)

  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")


  // x-axis
  svg2.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(-20," + (20+height) + ")")
      .call(xAxis)
    .append("text")
      .attr("class", "label")
      .attr("x", width)
      .attr("y", -6)
      .style("text-anchor", "end")
      .text("GPA");
	  
//BU - Circles
var circles = svg2.selectAll("circle").data(schoolStats[1])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale(d.GPA) })
    .attr("cy", function(d) { return yScale2(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  }).attr("opacity", ".4"); 


 //NAU
var svg3 = d3.select("#canvas").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  svg3.append("g")
      .attr("class", "y axis")
      .call(yAxis)
      .attr("transform", "translate(" + (width+30) + ",-0)")
    .append("text")
      .attr("class", "label")
      .attr("y", height)
      .attr("transform", "rotate(-90)")
      .attr("dy", ".71em")
      .style("text-anchor", "end")



//NAU - Circles
var circles = svg3.selectAll("circle").data(schoolStats[2])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale2(d.GPA) })
    .attr("cy", function(d) { return yScale(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  }).attr("opacity", ".4"); 


//NYU 
  var svg4 = d3.select("#canvas").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//NYU - Circles
var circles = svg4.selectAll("circle").data(schoolStats[3])
    .enter().append("circle");

circles.attr("cx", function(d) { return xScale(d.GPA) })
    .attr("cy", function(d) { return yScale(d.SAT) })
    .attr("r", function(d) { return 4 })
    .attr("fill", function(d) { 
      if (d.TYPE=="accepted") return "green" 
       if (d.TYPE=="rejected") return "red" 
        if (d.TYPE=="attending") return "blue" 

  }).attr("opacity", ".4"); 
});
</script>
</body>
</html>






